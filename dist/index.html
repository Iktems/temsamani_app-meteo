<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="output.css" />
        <link rel='manifest' href='/manifest.webmanifest'>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Lato:wght@100;700&display=swap"
            rel="stylesheet">
        <link rel="apple-touch-icon" href="img/icon.png">
        <link rel='icon' href='img/icon.png'>
        <meta name="theme-color" content="#421A3A"/>
        <title>TEMSAMANI Ikrame - App Méteo</title>
    </head>
    <body class="">
        <div class=" mx-auto relative overflow-hidden
            h-[100vh] w-[100%] sm:h-auto sm:w-[400px]">
            <img class="object-bottom h-[100vh] w-screen
                object-cover fond" src="img/sunset.svg"
                alt="">

            <div class="absolute top-0 container accueil flex flex-col
                justify-between">


                <div class="imagecontainer menu flex flex-col justify-center
                    h-[100vh] w-[100%] items-center">
                    <p class="j1 p-10 text-white items-center">Je vous souhaite
                        la bienvenue dans mon application météo.<br> Pour plus
                        d'efficacité, je vous conseillerai de télécharger
                        l'application mais il vous est tout de même possible de
                        poursuivre votre recherche sur le net.</p>
                    <button class="button text-bleuik bg-white py-3 px-10
                        mt-5 hover:text-white hover:bg-transparent
                        hover:border-2 hover:border-white transition-all"
                        id="btnAdd">Installer</button>
                    <button class="button text-white py-3 px-10 hover:border-2
                        hover:border-white transition-all" id="btnNoAdd">Je
                        reste sur le net</button>
                </div>

                <div class="mt-10 flex flex-col align-middle
                    partiesup">
                    <div class="location flex justify-center mb-5">
                        <img class="h-8 w-auto mr-2" src="img/location.svg"
                            alt="icon-location">
                        <h1 class="text-3xl text-white font-bold uppercase"
                            id="location"></h1>
                    </div>
                    <div class="w-full h-[2px] bg-white deco1"></div>
                    <div class="w-[50%] h-[10px] bg-white deco2"></div>
                    <div class="w-full h-[2px] bg-white deco3"></div>
                </div>



                <div class="flex mb-5 mt-5 flex-col h-[68vh] justify-between
                    items-center partiemilieu1">
                    <div class="flex flex-col justify-between items-center
                        text-white">
                        <p class="date"></p>
                        <div class="flex">
                            <p class="heure text-3xl font-semibold"></p>
                            <p class="minutes text-3xl font-semibold"></span>
                        </div>

                    </div>
                    <div class="meteo flex justify-between items-center">
                        <h2 class="text-8xl text-white font-bold temp"><span></span>°</h2>
                        <div class="conditions ml-14 mb-5 flex flex-col
                            items-center">
                            <img class="h-24 w-auto mb-5" src=""
                                alt="">
                            <h3 class="text-xl text-white font-bold descri"></h3>
                        </div>
                    </div>
                </div>



                <div class="flex container h-[68vh] w-auto mb-5 mt-5
                    partiemilieu2
                    text-white flex-col ">
                    <div class="ojd h-[65%]">
                        <div class="pt-3 pb-5 cond-meteo flex h-auto w-96
                            mx-auto items-center justify-between border-b-2">
                            <img class="h-28 w-auto " src="img/sunny.svg"
                                alt="">
                            <div class="mto">
                                <h3 class="text-xl font-light">Aujourd'hui</h3>
                                <div id="mto w-auto">
                                    <p class="text-8xl leading-[5rem]
                                        font-semibold"><span class="max"></span><span
                                            class="text-5xl font-normal
                                            text-gray-400">/<span class="min"></span>°</span></p>
                                </div>
                                <p class="leading-10 font-normal text-gray-400
                                    cond"></p>
                            </div>
                        </div>
                        <div class="details mt-5 pb-2 h-auto w-96 mx-auto flex
                            justify-between">
                            <div class="humidity flex flex-col items-center">
                                <img class="h-6" src="img/humidity.svg"
                                    alt="humidity-icon">
                                <p class="text-xl pt-3 leading-4"><span
                                        id="humidity"></span> %</p>
                                <p class="font-light">Humidité</p>
                            </div>
                            <div class="precipitations flex flex-col
                                items-center">
                                <img class="h-6" src="img/precipitations.svg"
                                    alt="precipitations-icon">
                                <p class="text-xl pt-3 leading-4"><span
                                        id="precipitations"></span> mm</p>
                                <p class="font-light">Précipitations</p>
                            </div>
                            <div class="vent flex flex-col items-center">
                                <img class="h-6" src="img/vent.svg"
                                    alt="vent-icon">
                                <p class="text-xl pt-3 leading-4"><span
                                        id="vent"></span> km/h</p>
                                <p class="font-light">Vent</p>
                            </div>
                        </div>
                    </div>
                    <div class="semaine h-[100%] mt-3 w-[100%] flex mx-auto
                        flex-wrap">

                    </div>
                </div>



                <div class="partieinf">
                    <div class="mb-2 w-[100%] h-[3px] bg-white deco1"></div>
                    <div class="search w-full flex justify-between">
                        <input id="ville" class="text-bleuik w-[74%] h-20"
                            type="text"
                            name="search"
                            placeholder="ex: Nice">
                        <button class="w-[24%] border-0 h-20 calendrier
                            transition-all">
                        </button>
                        <button class="w-[24%] border-0 h-20 accueil1
                            transition-all">
                        </button>
                    </div>
                </div>

            </div>
        </div>

        <script src="js/jquery-3.6.1.min.js"></script>
        <script src="/service-worker.js"></script>
        <script>
            // service worker
            if ('serviceWorker' in navigator) {
              console.log('CLIENT: service worker registration in progress.');
              navigator.serviceWorker.register('/service-worker.js').then(function() {
                console.log('CLIENT: service worker registration complete!');
              }, function() {
                console.log('CLIENT: service worker registration failure.');
              });
            } else {
              console.log('CLIENT: service worker is not supported.');
            }
            
                   // Initialize deferredPrompt for use later to show browser install prompt.
                let deferredPrompt;

                window.addEventListener('beforeinstallprompt', (e) => {
                    // Prevent the mini-infobar from appearing on mobile
                    e.preventDefault();
                    // Stash the event so it can be triggered later.
                    deferredPrompt = e;
                    // Update UI notify the user they can install the PWA
                    showInstallPromotion();
                    // Optionally, send analytics event that PWA install promo was shown.
                    console.log('beforeinstallprompt event was fired: ');
                })

                // fonction qui montre le bouton isntallation
                function showInstallPromotion() {
                    console.log("ok on peut installer");

                    $('.menu').show();

                }

                var btnAdd = document.getElementById("btnAdd");
                var banniere = document.querySelector(".menu");

                btnAdd.addEventListener('click', (e) => {
                    // hide our user interface that shows our A2HS button
                    banniere.style.display = 'none';
                    // Show the prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    deferredPrompt
                        .userChoice
                        .then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('User accepted the A2HS prompt');
                            } else {
                                console.log('User dismissed the A2HS prompt');
                            }
                            deferredPrompt = null;
                        });
                });
                var btnNoAdd = document.getElementById("btnNoAdd");

                btnNoAdd.addEventListener('click', (e) => {
                    $('.menu').hide();
                });

                </script>
        <script src="js/script.js"></script>

    </body>
</html>
